
<link href="~/Content/assets/css/components.css" rel="stylesheet" />
<link href="~/Content/assets/css/core.css" rel="stylesheet" />
<link href="~/Content/assets/css/colors.css" rel="stylesheet" />
<link href="~/Content/download/pnotify.custom.min.css" rel="stylesheet" />
<link href="~/Content/assets/css/icons/icomoon/styles.css" rel="stylesheet" />

<script src="~/Content/download/plugins/jQuery/jquery.min.js"></script>
<script src="~/Content/assets/js/plugins/loaders/pace.min.js"></script>
<script src="~/Content/assets/js/plugins/loaders/blockui.min.js"></script>
<script src="~/Content/assets/js/plugins/visualization/d3/d3.min.js"></script>
<script src="~/Content/assets/js/plugins/visualization/d3/d3_tooltip.js"></script>
<script src="~/Content/assets/js/plugins/forms/styling/switchery.min.js"></script>
<script src="~/Content/assets/js/plugins/forms/styling/uniform.min.js"></script>
<script src="~/Content/assets/js/plugins/forms/selects/bootstrap_multiselect.js"></script>
<script src="~/Content/assets/js/plugins/ui/moment/moment.min.js"></script>
<script src="~/Content/assets/js/plugins/pickers/datepicker.js"></script>
<script src="~/Content/assets/js/plugins/pickers/daterangepicker.js"></script>
<script src="~/Content/assets/js/plugins/notifications/pnotify.min.js"></script>
<script src="~/Content/Scripts/angularjs/angular.js"></script>
<script src="~/Content/Scripts/angularjs/angular-route.min.js"></script>
<script src="~/Content/Scripts/angularjs/dirPagination.js"></script>
<script src="~/Content/Scripts/angularjs/app.js"></script>
<script src="~/Content/Scripts/daterangepicker.js"></script>
<script src="~/Content/Scripts/moment.min.js"></script>
<script src="~/Content/download/date_directive.js"></script>
<script src="~/Content/download/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="~/Content/assets/js/plugins/forms/selects/bootstrap_select.min.js"></script>
<script type="text/javascript" src="~/Content/assets/js/pages/form_bootstrap_select.js"></script>
<script src="~/Content/self-writing/js/Controllers/Kho/ChuyenKhoController.js"></script>
<div class="content" ng-app="app" ng-controller="StoreExchangeController">
    <!-- Dashboard content -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-white">
                <div class="panel-heading color-heading">
                    <h6 class="panel-title">{{TitleChuyenKho}}</h6>
                </div>
                <input type="hidden" value="@Session["USERNAME"]" id="username" />
                <input type="hidden" value="@Session["MA_CONG_TY"]" id="macongty" />
                <div class="panel-body">
                    <form class="form-horizontal text-center" style="margin-left: 20px;">
                        <div class="form-group">
                            <label class="radio-inline">
                                Chuyển kho giữ hàng
                                <input type="radio" ng-click="StoreChange(1)" name="radio-inline-left" class="styled" checked="checked">
                            </label>
                            <label class="radio-inline">
                                Chuyển kho ký gửi
                                <input type="radio" ng-click="StoreChange(2)" name="radio-inline-left" class="styled">
                            </label>
                            <label class="radio-inline">
                                Chuyển kho khác
                                <input type="radio" ng-click="StoreChange(3)" name="radio-inline-left" class="styled">
                            </label>
                        </div>
                    </form>
                    <div class="col-md-8">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h6 class="panel-title">Thông tin chung<a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                            </div>
                            <div class="panel-body">
                                <form class="form-horizontal">
                                    <div class="form-group">
                                        <label class="control-label col-lg-2">Diễn giải</label>
                                        <div class="col-lg-10">
                                            <textarea rows="7" ng-model="ChuyenKho.DienGiai" cols="7" class="form-control" placeholder=""></textarea>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h6 class="panel-title">Chứng từ<a class="heading-elements-toggle"><i class="icon-more"></i></a></h6>
                            </div>
                            <div class="panel-body">
                                <form class="form-horizontal">
                                    <div class="form-group">
                                        <label class="control-label col-lg-4">Ngày hạch toán</label>
                                        <div class="col-lg-8">
                                            <div class="form-group has-feedback">
                                                <input type="text" id="NgayHachToan" class="form-control datetimepicker">
                                                <div class="form-control-feedback">
                                                    <i class="icon-calendar"></i>
                                                </div>
                                                <label id="basic-error" class="validation-error-label" ng-if="ValidateGeneral.NgayHachToan == false" for="basic">Trường này không được để trống</label>
                                                <label id="basic-error" class="validation-error-label" ng-if="ValidateGeneral.NgayHachToanLess == false" for="basic">Ngày hạch toán phải lớn hơn hoặc bằng ngày chứng từ</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-lg-4">Ngày chứng từ</label>
                                        <div class="col-lg-8">
                                            <div class="form-group has-feedback">
                                                <input type="text" id="NgayChungTu" class="form-control datetimepicker">
                                                <div class="form-control-feedback">
                                                    <i class="icon-calendar"></i>
                                                </div>
                                            </div>
                                            <label id="basic-error" class="validation-error-label" ng-if="ValidateGeneral.NgayChungTu == false" for="basic">Trường này không được để trống</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-lg-4">Số chứng từ</label>
                                        <div class="col-lg-8">
                                            <input type="text" class="form-control">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 content-group" style="">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped table-hover ">
                                <thead>
                                    <tr class="bg-primary-300">
                                        <th style="width:20%" class="text-center">Mã hàng</th>
                                        <th style="width:20%" class="text-center">Tên hàng</th>
                                        <th style="width:20%" class="text-center">Xuất kho tại</th>
                                        <th style="width:20%" class="text-center">Nhập kho tại</th>
                                        <th style="width:10%" class="text-center">ĐVT</th>
                                        <th style="width:10%" class="text-center">Số lượng</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="(index,item) in Detail.ListAdd" id="DetailHang{{index}}">
                                        <td>
                                            <div class="has-feedback showtableselect" ng-click="ShowHangHoa(index)">
                                                <input type="text" ng-model="item.MA_CHUAN" class="input showtableselect" ng-change="SearchHH(item.MA_CHUAN)">

                                                <div class="form-control-feedback">
                                                    <i class="icon-arrow-down5"></i>
                                                </div>
                                            </div>
                                            <div class="tableselect" id="DataHangHoa{{index}}" style="display: block; max-width: 750px; padding-left: 0px; margin-left: -9px;">
                                                <table class="table-hover ">
                                                    <thead>
                                                        <tr>
                                                            <th>Mã hàng</th>
                                                            <th>Tên hàng</th>
                                                            <th>Mã nhóm hàng</th>
                                                            <th>Xuất xứ</th>
                                                            <th>DVT</th>
                                                            <th>Tên Kho</th>
                                                            <th>Số lượng tồn</th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="(hindex,itemHangHoa) in Detail.ListHangHoa" ng-click="SelectHangHoa(index,item,itemHangHoa)">
                                                            <td>{{itemHangHoa.MA_CHUAN}}</td>
                                                            <td>{{itemHangHoa.TEN_HANG}}</td>
                                                            <td>{{itemHangHoa.MA_NHOM_HANG}}</td>
                                                            <td>{{itemHangHoa.XUAT_XU}}</td>
                                                            <td>{{itemHangHoa.DVT}}</td>
                                                            <td>{{itemHangHoa.TEN_KHO}}</td>
                                                            <td class="text-center">{{itemHangHoa.SO_LUONG}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" ng-model="item.TEN_HANG" class="input">
                                        </td>
                                        <td>
                                            <input type="text" ng-model="item.TEN_KHO" class="input">
                                        </td>
                                        <td>
                                            <div class="has-feedback" ng-click="ShowKhoNhap(index)">
                                                <input type="text" ng-model="item.TEN_KHO_NHAP" class="input showtableselect">
                                                <div class="form-control-feedback">
                                                    <i class="icon-arrow-down5"></i>
                                                </div>
                                            </div>
                                            <div class="tableselect" id="DataKhoNhap{{index}}" style="display:none;max-width: 300px;top:90px;">
                                                <table class="table-hover ">
                                                    <thead>
                                                        <tr>
                                                            <th style="width:30%">Mã kho</th>
                                                            <th style="width:30%">Tên kho</th>
                                                            <th style="width:40%">Địa chỉ</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="(hindex,itemKho) in Detail.ListKho| filter:item.NHAP_KHO_TAI" ng-click="SelectKhoNhap(index,item,itemKho)">
                                                            <td>{{itemKho.MA_KHO}}</td>
                                                            <td>{{itemKho.TEN_KHO}}</td>
                                                            <td>{{itemKho.DIA_CHI}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" ng-model="item.DVT" class="input">
                                        </td>
                                        <td>
                                            <input type="number" ng-model="item.SO_LUONG" class="input">
                                        </td>
                                        <td class="text-center"><button ng-click="RemoveRow($index)" style="background: none !important; border: none !important;"><span class="glyphicon glyphicon-remove" style="color:red;"></span></button></td>
                                    </tr>
                                    <tr>
                                        <td colspan="7" style="text-align:center; cursor:pointer" ng-click="AddNew()">Bấm vào đây để thêm mới</td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12 text-center">
                        <button type="button" class="btn btn-primary" ng-click="SaveExchange();"><i class="icon-floppy-disk"></i> Lưu</button>
                        <a href="/" class="btn bg-orange-400"><i class="icon-blocked"></i> Bỏ qua</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(".styled, .multiselect-container input").uniform({
            radioClass: 'choice'
        });
    </script>
    <!-- /dashboard content -->
</div>
<style>
    .input {
        display: block;
        width: 100%;
        height: 34px;
        padding: 0px 5px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: transparent;
        background-image: none;
    }

    bordered > tfoot > tr > td {
        border: 1px solid #eeeeee !important;
    }
</style>

