
@{
    ViewBag.Title = "Index";
}
<link href="~/Content/self-writing/css/Kho/TachGopMa.css" rel="stylesheet" />
<script src="~/Content/self-writing/js/Controllers/TachGopMaCtrl.js"></script>
<h2>Tách - Gộp Mã</h2>
<div class="content" ng-app="myApp" ng-controller="TachGopMaCtrl">
    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal">Tạo mới mã tách</button>
    <table border=1 id="tachgopma_input">
        
        <tr >
            <th>Loại tách</th>
            <th>Mã gốc 1</th>
            <th>Mã gốc 2</th>
            <th>Mã gốc 3</th>
        </tr>
        <tr ng-repeat="item in danhsachtachgop">
            <th>{{item.LOAI_TACH}}</th>
            <td>{{item.TEN_MA_GOC_1}}</td>
            <td>{{item.TEN_MA_GOC_2}}</td>
            <td>{{item.TEN_MA_GOC_3}}</td>
            
        </tr>
        

    </table>

    <!-- Modal Add new -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Thêm mới dữ liệu tách mã</h4>
                </div>
                <div class="modal-body" style="overflow: scroll;">
                    <table border=1 id="tachgopma_input">
                        <tr>
                            <th colspan="2">Loại tách (*): </th>
                            <td colspan="7"><input type="Text" ng-model="loai_tach" style="width:100%"></td>
                        </tr>
                        <tr>
                            <th style="width:5%">Stt</th>
                            <th style="width:15%">Mã gốc</th>
                            <th style="width:15%">Mã chuẩn</th>
                            <th style="width:5%; text-align: center">Số lượng</th>
                            <th style="width:10%; text-align: center">Chọn mã</th>
                            <th style="width:2%"></th>
                            <th style="width:5%">Stt</th>
                            <th style="width:15%"> Mã chuyển đổi</th>
                            <th style="width:15%">Mã chuẩn</th>
                            <th style="width:5%; text-align: center">Số lượng</th>
                            <th style="width:10% ; text-align: center">Chọn mã</th>
                        </tr>
                        <tr>
                            <td>1 (*)</td>
                            <td><input type="Text" ng-model="ma_goc_1"></td>

                            <td><input type="Text" ng-model="machuangoc1"></td>
                            <td><input type="Text" ng-model="sl_ma_goc_1"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(111)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                            <td rowspan=27 style="color:aqua; font-size: 20px !important;"><i class="fa fa-arrow-right" aria-hidden="true"></i> </td>
                            <td>1 (*)</td>
                            <td><input type="Text" ng-model="ma_dich_1"></td>
                            <td><input type="Text" ng-model="machuandich1"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_1"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(1)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td><input type="Text" ng-model="ma_goc_2"></td>
                            <td><input type="Text" ng-model="machuangoc2"></td>
                            <td><input type="Text" ng-model="sl_ma_goc_2"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(222)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                            <td>2</td>
                            <td><input type="Text" ng-model="ma_dich_2"></td>
                            <td><input type="Text" ng-model="machuandich2"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_2"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(2)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td><input type="Text" ng-model="ma_goc_3"></td>
                            <td><input type="Text" ng-model="machuangoc3"></td>
                            <td><input type="Text" ng-model="sl_ma_goc_3"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(333)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                            <td>3</td>
                            <td><input type="Text" ng-model="ma_dich_3"></td>
                            <td><input type="Text" ng-model="machuandich3"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_3"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(3)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td rowspan=22 colspan="5"></td>
                            <td>4</td>
                            <td><input type="Text" ng-model="ma_dich_4"></td>
                            <td><input type="Text" ng-model="machuandich4"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_4"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(4)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td><input type="Text" ng-model="ma_dich_5"></td>
                            <td><input type="Text" ng-model="machuandich5"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_5"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(5)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td><input type="Text" ng-model="ma_dich_6"></td>
                            <td><input type="Text" ng-model="machuandich6"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_6"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(6)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td><input type="Text" ng-model="ma_dich_7"></td>
                            <td><input type="Text" ng-model="machuandich7"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_7"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(7)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td><input type="Text" ng-model="ma_dich_8"></td>
                            <td><input type="Text" ng-model="machuandich8"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_8"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(8)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td><input type="Text" ng-model="ma_dich_9"></td>
                            <td><input type="Text" ng-model="machuandich9"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_9"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(9)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td><input type="Text" ng-model="ma_dich_10"></td>
                            <td><input type="Text" ng-model="machuandich10"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_10"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(10)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td><input type="Text" ng-model="ma_dich_11"></td>
                            <td><input type="Text" ng-model="machuandich11"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_11"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(11)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td><input type="Text" ng-model="ma_dich_12"></td>
                            <td><input type="Text" ng-model="machuandich12"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_12"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(12)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td><input type="Text" ng-model="ma_dich_13"></td>
                            <td><input type="Text" ng-model="machuandich13"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_13"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(13)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>14</td>
                            <td><input type="Text" ng-model="ma_dich_14"></td>
                            <td><input type="Text" ng-model="machuandich14"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_14"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(14)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td><input type="Text" ng-model="ma_dich_15"></td>
                            <td><input type="Text" ng-model="machuandich15"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_15"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(15)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>16</td>
                            <td><input type="Text" ng-model="ma_dich_16"></td>
                            <td><input type="Text" ng-model="machuandich16"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_16"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(16)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>17</td>
                            <td><input type="Text" ng-model="ma_dich_17"></td>
                            <td><input type="Text" ng-model="machuandich17"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_17"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(17)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>18</td>
                            <td><input type="Text" ng-model="ma_dich_18"></td>
                            <td><input type="Text" ng-model="machuandich18"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_18"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(18)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>19</td>
                            <td><input type="Text" ng-model="ma_dich_19"></td>
                            <td><input type="Text" ng-model="machuandich19"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_19"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(19)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>20</td>
                            <td><input type="Text" ng-model="ma_dich_20"></td>
                            <td><input type="Text" ng-model="machuandich20"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_20"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(20)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>21</td>
                            <td><input type="Text" ng-model="ma_dich_21"></td>
                            <td><input type="Text" ng-model="machuandich21"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_21"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(21)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>22</td>
                            <td><input type="Text" ng-model="ma_dich_22"></td>
                            <td><input type="Text" ng-model="machuandich22"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_22"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(22)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>23</td>
                            <td><input type="Text" ng-model="ma_dich_23"></td>
                            <td><input type="Text" ng-model="machuandich23"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_23"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(23)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>24</td>
                            <td><input type="Text" ng-model="ma_dich_24"></td>
                            <td><input type="Text" ng-model="machuandich24"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_24"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(24)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                        <tr>
                            <td>25</td>
                            <td><input type="Text" ng-model="ma_dich_25"></td>
                            <td><input type="Text" ng-model="machuandich25"></td>
                            <td><input type="Text" ng-model="sl_ma_dich_25"></td>
                            <td><center><label data-toggle="modal" ng-click="KeyTransfer(25)" style="text-decoration: underline; color: #64B5F6" data-target="#ModalTimHang">Chọn mã</label></center></td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary"  ng-click="AddNew()">Thêm mới</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" >Thoát</button>
                </div>
            </div>

        </div>
    </div>
    <!--End Modal Add new-->



    <!-- Modal Tìm Mã -->
    <div class="modal fade" id="ModalTimHang" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Tìm mã</h4>
                </div>
                <div class="modal-body" style="overflow: scroll;">
                    <!--Form tìm kiếm-->
                    <div id="quick-access">
                        <form class="form-inline quick-search-form" role="form" action="#">
                            <div class="form-group" style="width: 100%">
                                <input type="text" style="width: 60%" class="form-control" placeholder="Type Customer Name You Want To Search Here" ng-model="search_text">
                                <input type="button" class="btn btn-info" ng-click="load_hanghoa(search_text)" value="Tìm hàng" />
                            </div>
                        </form>
                    </div>
                    <!--End Form tìm kiếm-->
                    <div class="content">
                        <table border=1 id="tachgopma_input">
                            <tr>
                                <th style="width:15%">Mã hàng</th>
                                <th style="width:25%">Mã chuẩn</th>
                                <th style="width:60%">Tên hàng</th>
                            </tr>
                            <tr ng-repeat="item in dshanghoa" ng-click="DataTransfer(item)">
                                <td >{{item.MA_HANG}}</td>
                                <td>{{item.MA_CHUAN}}</td>
                                <td>{{item.TEN_HANG}}</td>
                            </tr>
                        </table>
                        <hr />
                        <h2>Dữ liệu cần điền</h2>
                        <table border=1 id="tachgopma_input" style="margin-top:20px">
                            <tr>
                                <th style="width:10%">Mã hàng</th>
                                <td style="width:10%"><input type="Text" ng-model="datatruyen.MA_HANG" value="{{datatruyen.MA_HANG}}"></td>
                                <th style="width:10%">Mã chuẩn</th>
                                <td style="width:20%"><input type="Text" ng-model="datatruyen.MA_CHUAN" value="{{datatruyen.MA_CHUAN}}"></td>
                                <th style="width:10%">Tên hàng</th>
                                <td style="width:25%"><input type="Text" ng-model="datatruyen.TEN_HANG" value="{{datatruyen.TEN_HANG}}"></td>
                            </tr>
                          
                        </table>
                        


                    </div>


                   
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="laymahang(key, datatruyen.MA_HANG, datatruyen.MA_CHUAN)" data-dismiss="modal">Thêm</button>
                </div>
            </div>

        </div>
    </div>
    <!--End Modal Tìm Mã-->


    
</div>


