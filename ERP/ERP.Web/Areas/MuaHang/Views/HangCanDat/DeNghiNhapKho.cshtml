<script src="~/Content/assets/js/plugins/ui/moment/moment.min.js"></script>
<script src="~/Content/assets/js/plugins/pickers/datepicker.js"></script>
<script src="~/Content/assets/js/plugins/pickers/daterangepicker.js"></script>
<script src="~/Content/assets/js/plugins/notifications/pnotify.min.js"></script>

<script src="~/Content/Scripts/angularjs/dirPagination.js"></script>
<script src="~/Content/Scripts/daterangepicker.js"></script>
<script src="~/Content/Scripts/moment.min.js"></script>
<script src="~/Content/download/date_directive.js"></script>
<script src="~/Content/download/bootstrap-datetimepicker.js"></script>
<script src="~/Content/self-writing/js/Controllers/HangCanDatPurcCtrl.js"></script>

<div class="content" ng-controller="HangCanDatPurcCtrl" ng-app="myApp">
    <input type="hidden" value="@Session["USERNAME"]" id="username" />
    <input type="hidden" value="@Session["IS_AMIN"]" id="isadmin" />
    <div class="col-md-12">
        <table border="1" cellpadding="2" cellspacing="0" style="width:100%; padding:5px;">
            <tbody>
                <tr height="34">
                    <td colspan="10" height="34" style="height:34px;width:100%; text-align: center; font-size: 20px">
                        <b>FORM ĐỀ NGHỊ NHẬP KHO</b>
                    </td>
                </tr>
                <tr height="21">
                    <td colspan="10">
                        <table border="0" cellpadding="5" cellspacing="0" style="width:100%;">
                            <tr height="28">
                                <td height="28" style="height:28px;width:100px;">
                                    Nhà cung cấp:
                                </td>
                                <td colspan="4" height="28" style="height:28px;">
                                    <p ng-model="thongtinchung.TEN_NHA_CUNG_CAP">{{thongtinchung.TEN_NHA_CUNG_CAP}}</p>
                                    <input ng-model="thongtinchung.NHA_CUNG_CAP" style="display:none"/>
                                </td>
                                <td height="28" style="height:28px;width:100px;">
                                    Ngày:
                                </td>
                                <td colspan="2" height="28" style="height:28px;">
                                    <input value="@DateTime.Today.Date.ToString("dd/MM/yyyy")"  style="border:none !important" readonly/>
                                </td>
                            </tr>
                            <tr height="28">
                                <td height="28" style="height:28px;width:100px;">
                                    Người liên hệ:
                                </td>
                                <td colspan="4" height="28" style="height:28px;">
                                    {{thongtinchung.TEN_NGUOI_LIEN_HE}}
                                    <input ng-model="thongtinchung.NGUOI_LIEN_HE" style="display:none" />
                                </td>
                                <td height="28" style="height:28px;width:100px;">
                                    Người liên hệ:
                                </td>
                                <td colspan="2" height="28" style="height:28px;">
                                    <input type="text" value="@Session["HO_VA_TEN"]"  style="border:none !important" readonly/>
                                </td>
                            </tr>
                            <tr height="28">
                                <td height="28" style="height:28px;width:100px;">
                                    Địa chỉ:
                                </td>
                                <td colspan="4" height="28" style="height:28px;">
                                    {{thongtinchung.DIA_CHI_XUAT_HOA_DON}}
                                </td>
                                <td height="28" style="height:28px;width:100px;">
                                    Email:
                                </td>
                                <td colspan="2" height="28" style="height:28px;">
                                    <input type="text" value="@Session["EMAIL"]"  style="border:none !important" readonly/>
                                </td>
                            </tr>
                            <tr height="28">
                                <td height="28" style="height:28px;width:100px;">
                                    Email:
                                </td>
                                <td colspan="4" height="28" style="height:28px;">
                                    {{thongtinchung.EMAIL_NCC}}
                                </td>
                                <td height="28" style="height:28px;width:100px;">
                                    SĐT:
                                </td>
                                <td colspan="2" height="28" style="height:28px;">
                                    <input type="text" value="@Session["SDT"]" style="border:none !important" readonly/>
                                </td>
                            </tr>
                            <tr height="28">
                                <td height="28" style="height:28px;width:100px;">
                                    Tel:
                                </td>
                                <td height="28" style="height:28px;">
                                    {{thongtinchung.SDT_NCC}}
                                </td>
                                <td height="28" style="height:28px;">
                                    Fax:
                                </td>
                                <td colspan="2" height="28" style="height:28px;">
                                    {{thongtinchung.FAX}}
                                </td>
                                <td colspan="3" height="28" style="height:28px;"></td>
                            </tr>

                        </table>
                    </td>
                </tr>

                <tr height="21">
                    <td colspan="4" height="38" rowspan="2" style="height:38px;width:520px;">
                        Ngày về dự kiến : <input ng-model="ngay_ve_du_kien" mask="99/99/9999"/>
                    </td>
                    
                    <td colspan="6" rowspan="2" style="width:353px;">
                        Thuế VAT(%) : <input ng-model="thongtinchung.THUE_VAT" readonly  style="border: none !important"/>
                    </td>
                </tr>
                <tr height="17"></tr>
                <tr height="34">
                    <td></td>
                    <td height="34" style="height:34px;width:39px;">
                        <b>STT</b>
                    </td>
                    <td style="width:296px;">
                        <b>Mã hàng</b>
                    </td>
                    <td style="width:117px;text-align:center">
                        <b>Hãng sx</b>
                    </td>
                    <td style="width:68px;text-align:center">
                        <b>SL</b>
                    </td>
                    <td style="width:133px;text-align:center">
                        <b>Đơn giá</b><br />
                        <i>chưa VAT (VNĐ)</i>
                    </td>
                    <td style="width:167px;text-align:center">
                        <b>Thành tiền</b><br />
                        <i>chưa VAT (VNĐ)</i>
                    </td>
                    <td>Diễn giải thuế</td>
                    <td>Thuế VAT(%)</td>
                    <td>Tiền thuế GTGT</td>
                </tr>
                <tr height="43" ng-repeat="(index,detail) in thongtinchitiet">
                    <td>
                        <input type="checkbox" ng-click="TickPhieuNhapKho(trangthai,detail)" ng-model="trangthai"/>
                    </td>
                    <td height="43" style="height:43px;width:39px;">
                        {{$index + 1}}
                    </td>
                    <td align="left">
                        <span type="text" class="form-control" style="height:21px;width:100%; margin-bottom:5px" ng-model="detail.MA_CHUAN">{{detail.MA_CHUAN}}</span>
                        <span type="text" class="form-control" ng-model="detail.MA_HANG" style="display:none">{{detail.MA_HANG}}</span>
                        <input ng-model="detail.ID" style="display:none" />
                        <span type="text" style="height:21px;width:100%;">{{detail.TEN_HANG}}</span>
                    </td>
                    <td style="width:117px;">
                        <span type="text" style="height:21px;width:100%; margin-bottom:5px">{{detail.MA_NHOM_HANG}}</span>
                    </td>
                    <td>
                        <input type="number" style="height:35px;width:95%;border: none !important" ng-model="detail.SL" ng-change="kiemtranhapkho(detail)">
                    </td>
                    <td align="right">
                        <input type="text" style="height:21px;width:95%;text-align:right;border: none !important" format="number" readonly ng-model="detail.DON_GIA_CHUA_VAT">
                    </td>
                    <td align="right">
                        {{detail.THANH_TIEN_CHUA_VAT | currency : '' : 0}}
                        <input type="number" ng-model="detail.THANH_TIEN_CHUA_VAT" readonly style="display:none" />
                    </td>
                    <td>
                        <input type="text" ng-model="detail.DIEN_GIAI_THUE"/>
                    </td>
                    <td>
                        <input type="text" ng-model="thongtinchung.THUE_VAT" readonly style="border:none !important"/>
                    </td>
                    <td>
                        {{detail.TIEN_THUE_GTGT | currency : '' : 0}}
                        <input type="text" ng-model="detail.TIEN_THUE_GTGT" readonly style="display:none"/>
                    </td>
                </tr>
                <tr height="31">
                    <td height="31" style="height:31px;">
                        &nbsp;
                    </td>
                    <td>
                        &nbsp;
                    </td>
                    <td colspan="7">
                        <b>Tổng cộng</b>
                    </td>
                    <td align="right"> <b>{{thongtinchung.TONG_TIEN_HANG | currency: '' : 0}}</b></td>
                </tr>
                <tr height="31">
                    <td height="31" style="height:31px;">
                        &nbsp;
                    </td>
                    <td>
                        &nbsp;
                    </td>
                    <td colspan="7">
                        <b>Tiền thuế VAT (10%)</b>
                    </td>
                    <td align="right"><b>{{thongtinchung.TIEN_THUE_VAT | currency: '' : 0}}</b></td>
                </tr>
                <tr height="31">
                    <td height="31" style="height:31px;">
                        &nbsp;
                    </td>
                    <td>
                        &nbsp;
                    </td>
                    <td colspan="7">
                        <b>TỔNG GIÁ TRỊ ĐƠN HÀNG (Đã bao gồm VAT)</b>
                    </td>
                    <td align="right"><b>{{thongtinchung.TONG_TIEN_DA_BAO_GOM_VAT | currency: '' :0}}</b></td>
                </tr>
                <tr height="25">
                    <td height="25" style="height:25px;"></td>
                    <td align="right"><b>Bằng chữ:</b></td>
                    <td colspan="8"><b>{{thongtinchung.TONG_TIEN_BANG_CHU}} đồng</b></td>
                </tr>
                <tr height="17">
                    <td colspan="10" height="17" style="height:17px;">
                        &nbsp;
                    </td>
                </tr>
                <tr height="21">
                    <td colspan="10" height="21" style="height:21px;width:873px;"><b>Các điều khoản thương mại:</b></td>
                </tr>
                <tr height="21">
                    <td colspan="2" height="21" style="height:21px;">
                        1/ Diễn giải:
                    </td>
                    <td colspan="8" height="21" style="height:21px;">
                        <input type="text" style="height:21px;width:100%;" ng-model="thongtinchung.DIEN_GIAI">
                    </td>
                </tr>
                <tr height="21">
                    <td colspan="2" height="21" style="height:21px;">
                        2/ Hình thức thanh toán:
                    </td>
                    <td colspan="8" height="21" style="height:21px;">
                        <input type="text" style="height:21px;width:100%;" ng-model="thongtinchung.HINH_THUC_THANH_TOAN" />
                </tr>
                <tr height="21">
                    <td colspan="2" height="21" style="height:21px;">
                        3/ Hình thức vận chuyển:
                    </td>
                    <td colspan="8" height="21" style="height:21px;">
                        <input type="text" style="height:21px;width:100%;" ng-model="thongtinchung.HINH_THUC_VAN_CHUYEN">
                    </td>
                </tr>
                <tr height="21">
                    <td colspan="2" height="21" style="height:21px;">
                        4/ Thời hạn thanh toán :
                    </td>
                    <td colspan="8" height="21">
                        <input type="text" style="height:21px;width:100%;" ng-model="thongtinchung.THOI_HAN_THANH_TOAN">
                    </td>
                </tr>
            </tbody>
        </table>

        <button type="button" ng-click="DeNghiNhapKho()" class="btn btn-default">Lưu đề nghị nhập kho</button>
    </div>
</div>


